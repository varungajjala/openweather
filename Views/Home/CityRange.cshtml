
@{
    ViewBag.Title = "CityRange";   
}


@section scripts{
    <script src=" ~/TemperatureApp.js"></script>
    <script src=" ~/CountryCitiesController.js"></script>
    <script src=" ~/forecast.js"></script>
}

<div class="container-fluid" ng-app="tempApp">
    <div class=" col-xs-12 top-bottom-padding" ng-controller="CountryCitiesController">
        <div class="col-xs-12 top-bottom-padding">
            <h3 class="primary-heading">Please select the countries for which you want the average temperatures</h3>
        </div>

        <div class="col-xs-6">
            <div class="col-xs-6">
                <span class="primary-text">Provide Min Temperature</span>
            </div>
            <div class="col-xs-6">
                <input class="form-control" type="text" ng-model="minTemp">
            </div>
        </div>
        <div class="col-xs-6">
            <div class="col-xs-6">
                <span class="primary-text">Provide Max Temperature</span>
            </div>
            <div class="col-xs-6">
                <input class="form-control" type="text" ng-model="maxTemp">
            </div>
        </div>
        <div class="col-xs-12 top-padding">
            <button class="col-xs-3 col-xs-offset-4 btn btn-default"  ng-click="getCities(minTemp,maxTemp)"><span class="primary-text">Get Cities within range</span> </button>
        </div>

        <div class="col-xs-12">
            <div class="top-bottom-padding">
                <div class="col-xs-6" ng-repeat="country in countryCities">
                    <div class="col-xs-6">
                        <span class="primary-text">Country: {{country.Key}}</span> 
                    </div>
                    <div class="col-xs-6">
                        <button class="btn btn-default" type="button" ng-click="modifyData(country.Value)" data-toggle="modal" data-target="#citiesModal{{country.Key}}">
                            <span class="primary-text">View Cities</span>
                        </button>

                        <div id="citiesModal{{country.Key}}" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class=" close" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title primary-heading">Cities Within Temperature range</h4>
                                    </div>
                                    <div class="modal-body" style="height:auto; max-height:300px; overflow-y: scroll;">
                                        <p class="primary-text">
                                            {{modifiedData}}
                                        </p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>